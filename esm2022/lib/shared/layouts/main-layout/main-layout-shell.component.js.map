{"version":3,"file":"main-layout-shell.component.js","sourceRoot":"","sources":["../../../../../../../../../packages/modules/rc-ui/src/lib/shared/layouts/main-layout/main-layout-shell.component.ts","../../../../../../../../../packages/modules/rc-ui/src/lib/shared/layouts/main-layout/main-layout-shell.component.html"],"names":[],"mappings":"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","sourcesContent":["import { AsyncPipe, CommonModule } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  DestroyRef,\n  EventEmitter,\n  inject,\n  Input,\n  Output,\n} from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { NavigationEnd, Router, RouterModule } from '@angular/router';\nimport { filter } from 'rxjs';\n\nimport {\n  VCLButtonModule,\n  VCLDrawerModule,\n  VCLFormControlGroupModule,\n  VCLIcogramModule,\n  VCLIconModule,\n  VCLInputModule,\n  VCLNavigationModule,\n} from '@vcl/ng-vcl';\n\nimport {\n  RcLayoutNavCategoryId,\n  RcLayoutNavItem,\n  RcTranslatable,\n} from './main-layout-config.model';\nimport { RcLayoutFacade } from './main-layout.facade';\nimport { RC_LAYOUT_CONFIG } from './main-layout.tokens';\nimport {\n  RcBannerComponent,\n  RcBreadcrumbComponent,\n  RcCategorySelectComponent,\n} from '../../patterns';\nimport {\n  RcHeaderOrganization,\n  RcHeaderToolbarComponent,\n  RcHeaderUser,\n} from '../header-toolbar';\nimport { RS_TRANSLATE } from '../../../i18n/i18n.tokens';\n\n@Component({\n  selector: 'rc-layout-shell',\n  templateUrl: './main-layout-shell.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrl: './main-layout-shell.component.scss',\n  imports: [\n    AsyncPipe,\n    RouterModule,\n    VCLDrawerModule,\n    VCLNavigationModule,\n    VCLIcogramModule,\n    RcCategorySelectComponent,\n    VCLIconModule,\n    VCLInputModule,\n    VCLButtonModule,\n    RcBreadcrumbComponent,\n    RcBannerComponent,\n    VCLFormControlGroupModule,\n    CommonModule,\n    RcHeaderToolbarComponent,\n  ],\n})\nexport class RcLayoutShellComponent {\n  private router = inject(Router);\n  public facade = inject(RcLayoutFacade);\n  public readonly config = inject(RC_LAYOUT_CONFIG, { optional: false });\n  private readonly t = inject(RS_TRANSLATE, { optional: false });\n\n  @Input() user: RcHeaderUser | null = {\n    id: 'user-1',\n    fullName: 'Bello Babakolo',\n    email: 'bello.babakolo@example.com',\n  };\n\n  @Input() organizations: RcHeaderOrganization[] = [\n    {\n      id: 'org-nfuse',\n      name: 'n-fuse GmbH',\n      description: 'IoT & E-commerce platform',\n    },\n    {\n      id: 'org-fieldmorph',\n      name: 'FieldMorph',\n      description: 'Field operations & asset tracking',\n    },\n    {\n      id: 'org-bells',\n      name: 'Bells Transport',\n      description: 'Bus ticketing & logistics',\n    },\n  ];\n\n  @Input() selectedOrganizationId: string | null = null;\n\n  @Input() showProfile = true;\n  @Input() showPreferences = true;\n  @Input() showSignOut = true;\n\n  @Output() organizationSelected = new EventEmitter<string>();\n  @Output() accountAction = new EventEmitter<\n    'profile' | 'preferences' | 'sign-out'\n  >();\n\n  @Output() searchChange = new EventEmitter<string>();\n\n  private readonly destroyRef = inject(DestroyRef);\n\n  constructor() {\n    this.facade.initConfig(this.config);\n\n    this.router.events\n      .pipe(\n        filter((e): e is NavigationEnd => e instanceof NavigationEnd),\n        takeUntilDestroyed(this.destroyRef)\n      )\n      .subscribe((e) => {\n        this.syncCategoryWithUrl(e.urlAfterRedirects);\n      });\n  }\n\n  isHandset$ = this.facade.isHandset$;\n\n  collapsed$ = this.facade.collapsed$;\n  categories$ = this.facade.categories$;\n  activeCategory$ = this.facade.activeCategory$;\n  visibleNavItems$ = this.facade.visibleNavItems$;\n\n  label$(v: RcTranslatable) {\n    return this.t(v);\n  }\n\n  navigate(item: RcLayoutNavItem) {\n    if (item.externalUrl) {\n      window.open(item.externalUrl, '_blank');\n      return;\n    }\n    if (item.route) {\n      this.router.navigate([item.route]);\n    }\n  }\n\n  onToggleSidebar(isHandset: boolean | null): void {\n    if (isHandset) {\n      this.toggleSidebar();\n    }\n  }\n\n  toggleSidebar() {\n    this.facade.toggleSidebar();\n  }\n\n  onSelectCategory(id: RcLayoutNavCategoryId): void {\n    this.facade.setActiveCategory(id);\n\n    const category = this.config.categories?.find((c) => c.id === id);\n    let target = category?.defaultRoute;\n\n    if (!target) {\n      const first = this.getFirstNavItemForCategory(id);\n      if (first) {\n        target = first.route ?? first.children?.[0]?.route;\n      }\n    }\n\n    if (!target) {\n      return;\n    }\n\n    if (Array.isArray(target)) {\n      this.router.navigate(target);\n    } else {\n      this.router.navigate([target]);\n    }\n  }\n\n  onSearchChange(term: string): void {\n    this.searchChange.emit(term);\n  }\n\n  onSelectOrganization(id: string): void {\n    this.organizationSelected.emit(id);\n  }\n\n  onAccountItemSelected(value: string): void {\n    if (\n      value === 'profile' ||\n      value === 'preferences' ||\n      value === 'sign-out'\n    ) {\n      this.accountAction.emit(value);\n    }\n  }\n\n  private getFirstNavItemForCategory(\n    id: RcLayoutNavCategoryId\n  ): RcLayoutNavItem | undefined {\n    const flat = this.flattenNavItems(this.config.navItems);\n    const defaultCategoryId = this.config.categories?.[0]?.id;\n\n    return flat.find((item) => {\n      const cid = item.categoryId ?? defaultCategoryId;\n      return cid === id && (item.route || item.children?.some((c) => c.route));\n    });\n  }\n\n  private flattenNavItems(items: RcLayoutNavItem[]): RcLayoutNavItem[] {\n    const out: RcLayoutNavItem[] = [];\n    for (const item of items) {\n      out.push(item);\n      if (item.children?.length) {\n        out.push(...this.flattenNavItems(item.children));\n      }\n    }\n    return out;\n  }\n\n  private syncCategoryWithUrl(url: string): void {\n    const flat = this.flattenNavItems(this.config.navItems);\n    const defaultCategoryId = this.config.categories?.[0]?.id;\n\n    const match = flat.find((item) => this.routeMatchesUrl(item.route, url));\n\n    if (!match) {\n      return;\n    }\n\n    const categoryId = match.categoryId ?? defaultCategoryId;\n    if (!categoryId) {\n      return;\n    }\n\n    this.facade.setActiveCategory(categoryId);\n  }\n\n  private routeMatchesUrl(route: string | undefined, url: string): boolean {\n    if (!route) return false;\n\n    let path: string;\n    if (Array.isArray(route)) {\n      path = this.router.createUrlTree(route).toString();\n    } else {\n      path = this.router.createUrlTree([route]).toString();\n    }\n\n    return url === path || url.startsWith(path + '/');\n  }\n}\n","<vcl-drawer-container\n  (backdropClick)=\"toggleSidebar()\"\n  class=\"layout-shell-container\"\n>\n  <vcl-drawer\n    [mode]=\"(isHandset$ | async) ? 'over' : 'side'\"\n    [opened]=\"(collapsed$ | async) === false\"\n  >\n    <vcl-navigation class=\"h-100p layout-shell-navigation\">\n      <div class=\"row justify-content-between py-1 px-2\">\n        <rc-brand\n          [brandName]=\"config.appName\"\n          [logoUrl]=\"config.logoUrl\"\n        />\n        <button\n          vcl-button\n          square\n          class=\"transparent\"\n          [title]=\"\n            (collapsed$ | async)\n              ? (label$(config.uiText?.hideSidebar || 'Hide') | async)\n              : (label$(config.uiText?.showSidebar || 'Show') | async)\n          \"\n          (click)=\"toggleSidebar()\"\n        >\n          <vcl-icon\n            class=\"scale155p\"\n            icon=\"mdi mdi-page-layout-sidebar-left\"\n          />\n        </button>\n      </div>\n\n      @if (isHandset$ | async) { @if (categories$ | async; as categories) {\n      <div class=\"my-2 px-2\">\n        <rc-category-select\n          [title]=\"label$(config.uiText?.selectCategory || '') | async\"\n          [categories]=\"(categories$ | async) || []\"\n          [value]=\"activeCategory$ | async\"\n          (valueChange)=\"onSelectCategory($event)\"\n        />\n      </div>\n      } } @for (item of (facade.visibleNavItems$ | async); track $index) {\n      <vcl-navigation-item\n        #navItem=\"vclNavigationItem\"\n        [routerLink]=\"item.children?.length ? null : item.route\"\n        [routerLinkActive]=\"item.children?.length ? [] : ['selected']\"\n        (click)=\"\n          !item.children?.length && navigate(item); $event.stopPropagation()\n        \"\n      >\n        <vcl-navigation-label>\n          <vcl-icogram>\n            @if (item.children?.length) {\n            <vcl-icon\n              vclPrepend\n              [icon]=\"navItem.opened ? 'vcl:chevron-down' : 'vcl:chevron-right'\"\n            ></vcl-icon>\n            } @if (!item.children?.length) {\n            <vcl-icon\n              vclPrepend\n              [icon]=\"item.icon\"\n            ></vcl-icon>\n            }\n\n            {{ label$(item.label) | async }}\n          </vcl-icogram>\n        </vcl-navigation-label>\n\n        @if (item.children?.length) {\n        <vcl-navigation>\n          @for (child of item.children; track $index) {\n          <vcl-navigation-item\n            [routerLink]=\"child.route\"\n            [routerLinkActive]=\"['selected']\"\n            (click)=\"navigate(child); $event.stopPropagation()\"\n          >\n            <vcl-navigation-label>\n              <vcl-icogram>\n                <vcl-icon\n                  vclPrepend\n                  [icon]=\"child.icon\"\n                ></vcl-icon>\n                {{ label$(child.label) | async }}\n              </vcl-icogram>\n            </vcl-navigation-label>\n          </vcl-navigation-item>\n          }\n        </vcl-navigation>\n        }\n      </vcl-navigation-item>\n      }\n\n      <div class=\"py-1 px-2 rs-navigation-item-bottom-container\">\n        @if ((isHandset$ | async) === false) { @if (categories$ | async; as\n        categories) {\n        <rc-category-select\n          [title]=\"label$(config.uiText?.selectCategory || '') | async\"\n          [categories]=\"(categories$ | async) || []\"\n          [value]=\"activeCategory$ | async\"\n          (valueChange)=\"onSelectCategory($event)\"\n        />\n        } }\n\n        <vcl-navigation-item>\n          <vcl-navigation-label>\n            Â©2025\n            <a href=\"#\">Restorecommerce</a>\n            . All rights reserved.\n          </vcl-navigation-label>\n        </vcl-navigation-item>\n      </div>\n    </vcl-navigation>\n  </vcl-drawer>\n\n  <header class=\"row align-items-center px-2\">\n    @if (collapsed$ | async) {\n    <button\n      vcl-button\n      square\n      class=\"transparent\"\n      [title]=\"label$(config.uiText?.showSidebar ?? 'Show sidebar') | async\"\n      (click)=\"toggleSidebar()\"\n    >\n      <vcl-icon\n        class=\"scale155p\"\n        icon=\"mdi mdi-page-layout-sidebar-left\"\n      />\n    </button>\n    }\n\n    <rc-breadcrumb\n      [rootLabel]=\"'Home'\"\n      [rootUrl]=\"'/'\"\n      [breadcrumbsToExclude]=\"['Home']\"\n    />\n\n    <div class=\"flex\"></div>\n\n    <rc-header-toolbar\n      [organizations]=\"organizations\"\n      [user]=\"user\"\n      [selectedOrganizationId]=\"selectedOrganizationId\"\n      (organizationSelected)=\"onSelectOrganization($event)\"\n      (accountAction)=\"onAccountItemSelected($event)\"\n      (searchChange)=\"onSearchChange($event)\"\n    />\n  </header>\n\n  <main class=\"flex px-2 rs-main\">\n    <ng-content />\n  </main>\n</vcl-drawer-container>\n"]}