{"version":3,"file":"header-toolbar.component.js","sourceRoot":"","sources":["../../../../../../../../../packages/modules/rc-ui/src/lib/shared/layouts/header-toolbar/header-toolbar.component.ts","../../../../../../../../../packages/modules/rc-ui/src/lib/shared/layouts/header-toolbar/header-toolbar.component.html"],"names":[],"mappings":"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","sourcesContent":["import { ConnectedPosition } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  inject,\n  Input,\n  Output,\n} from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport {\n  VCLButtonModule,\n  VCLDataListModule,\n  VCLIcogramModule,\n  VCLIconModule,\n  VCLInputModule,\n  VCLPopoverModule,\n  VCLSelectListModule,\n} from '@vcl/ng-vcl';\n\nimport { RcHeaderOrganization, RcHeaderUser } from './header-toolbar.models';\nimport { RS_TRANSLATE } from '../../../i18n.tokens';\nimport { RC_LAYOUT_CONFIG, RcTranslatable } from '../main-layout';\n\n@Component({\n  selector: 'rc-header-toolbar',\n  templateUrl: './header-toolbar.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  imports: [\n    FormsModule,\n    RouterModule,\n    CommonModule,\n    VCLButtonModule,\n    VCLPopoverModule,\n    VCLDataListModule,\n    VCLSelectListModule,\n    VCLIconModule,\n    VCLIcogramModule,\n    VCLInputModule,\n  ],\n})\nexport class RcHeaderToolbarComponent {\n  @Input() user: RcHeaderUser | null = {\n    id: 'user-1',\n    fullName: 'Bello Babakolo',\n    email: 'bello.babakolo@example.com',\n    // avatarUrl: 'https://i.pravatar.cc/80?img=5',\n  };\n\n  @Input() organizations: RcHeaderOrganization[] = [\n    {\n      id: 'org-nfuse',\n      name: 'n-fuse GmbH',\n      description: 'IoT & E-commerce platform',\n    },\n    {\n      id: 'org-fieldmorph',\n      name: 'FieldMorph',\n      description: 'Field operations & asset tracking',\n    },\n    {\n      id: 'org-bells',\n      name: 'Bells Transport',\n      description: 'Bus ticketing & logistics',\n    },\n  ];\n\n  @Input() selectedOrganizationId: string | null = 'org-nfuse';\n\n  @Input() showProfile = true;\n  @Input() showPreferences = true;\n  @Input() showSignOut = true;\n\n  /** Popover positions (you can override if needed) */\n  @Input() rightOrientedPositions: ConnectedPosition[] = [\n    {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'top',\n    },\n  ];\n\n  /** Emitted when an organization is selected */\n  @Output() organizationSelected = new EventEmitter<string>();\n\n  /** Emitted when an account action is chosen */\n  @Output() accountAction = new EventEmitter<\n    'profile' | 'preferences' | 'sign-out'\n  >();\n\n  /** Emitted when the search term changes */\n  @Output() searchChange = new EventEmitter<string>();\n\n  @HostBinding('class.row')\n  hostRowClass = true;\n\n  private readonly t = inject(RS_TRANSLATE, { optional: false });\n  public readonly config = inject(RC_LAYOUT_CONFIG, { optional: false });\n\n  searchTerm = '';\n\n  get selectedOrganization(): RcHeaderOrganization | undefined {\n    return this.organizations.find((o) => o.id === this.selectedOrganizationId);\n  }\n\n  get filteredOrganizations(): RcHeaderOrganization[] {\n    const term = this.searchTerm.trim().toLowerCase();\n    if (!term) return this.organizations;\n\n    return this.organizations.filter((org) => {\n      const name = org.name?.toLowerCase() ?? '';\n      const desc = org.description?.toLowerCase() ?? '';\n      return name.includes(term) || desc.includes(term);\n    });\n  }\n\n  onSearchChange(term: string): void {\n    this.searchChange.emit(term);\n  }\n\n  onSelectOrganization(id: string): void {\n    this.organizationSelected.emit(id);\n  }\n\n  onAccountItemSelected(value: string): void {\n    if (\n      value === 'profile' ||\n      value === 'preferences' ||\n      value === 'sign-out'\n    ) {\n      this.accountAction.emit(value);\n    }\n  }\n\n  label$(v: RcTranslatable) {\n    return this.t(v);\n  }\n}\n","@if (user) {\n<div>\n  <!-- Organization trigger -->\n  <span\n    #popoverOrganizationTarget\n    class=\"inline-block\"\n  >\n    <button\n      vcl-button\n      [selectable]=\"true\"\n      (click)=\"templatePopoverOrganization.toggle()\"\n      class=\"half-transparent\"\n    >\n      <vcl-icon\n        vclPrepend\n        icon=\"mdi:home-outline\"\n      ></vcl-icon>\n\n      {{ selectedOrganization?.name || 'rs-ui.header.org.selectPlaceholder' }}\n\n      <vcl-icon\n        vclAppend\n        icon=\"mdi:chevron-down\"\n      ></vcl-icon>\n    </button>\n  </span>\n\n  <!-- Account trigger -->\n  <span\n    #popoverAccountTarget\n    class=\"inline-block\"\n  >\n    <button\n      vcl-button\n      [selectable]=\"true\"\n      (click)=\"templatePopoverAccount.toggle()\"\n      class=\"half-transparent account\"\n    >\n      <vcl-icogram>\n        <vcl-icon icon=\"mdi:account-outline\"></vcl-icon>\n        {{ user.fullName }}\n        <vcl-icon icon=\"mdi:chevron-down\"></vcl-icon>\n      </vcl-icogram>\n    </button>\n  </span>\n</div>\n\n<!-- ORG POPOVER -->\n<ng-template\n  vclPopover\n  #templatePopoverOrganization=\"vclPopover\"\n  [target]=\"popoverOrganizationTarget\"\n  class=\"mt-2\"\n  [closeOnOffClick]=\"true\"\n  [positions]=\"rightOrientedPositions\"\n>\n  <div class=\"rc-header-toolbar-org-popover\">\n    <!-- Search -->\n    <vcl-input-field class=\"searchField\">\n      <input\n        vclInput\n        placeholder=\"Search organizations...\"\n        [(ngModel)]=\"searchTerm\"\n      />\n    </vcl-input-field>\n\n    <!-- Organization list -->\n    <vcl-select-list\n      class=\"m-0\"\n      (valueChange)=\"\n        onSelectOrganization($event); templatePopoverOrganization.close()\n      \"\n    >\n      @for (organization of filteredOrganizations; track $index) {\n      <vcl-select-list-item\n        class=\"row center\"\n        [value]=\"organization.id\"\n      >\n        <div class=\"p-2\">{{ organization?.name }}</div>\n      </vcl-select-list-item>\n      }\n    </vcl-select-list>\n  </div>\n</ng-template>\n\n<!-- ACCOUNT POPOVER -->\n<ng-template\n  vclPopover\n  #templatePopoverAccount=\"vclPopover\"\n  [target]=\"popoverAccountTarget\"\n  [closeOnOffClick]=\"true\"\n  [positions]=\"rightOrientedPositions\"\n>\n  <vcl-select-list\n    (valueChange)=\"\n      onAccountItemSelected($event); templatePopoverAccount.close()\n    \"\n  >\n    @if (showProfile) {\n    <vcl-select-list-item value=\"profile\">\n      <vcl-icon\n        vclPrepend\n        icon=\"mdi:account-cog-outline\"\n      ></vcl-icon>\n\n      {{ label$(config.accountMenu?.profile || 'Profile') | async }}\n    </vcl-select-list-item>\n    } @if (showPreferences) {\n    <vcl-select-list-item value=\"preferences\">\n      <vcl-icon\n        vclPrepend\n        icon=\"mdi:cog-outline\"\n      ></vcl-icon>\n      {{ label$(config.accountMenu?.preferences || 'Preferences') | async }}\n    </vcl-select-list-item>\n    } @if (showSignOut) {\n    <vcl-select-list-item value=\"sign-out\">\n      <vcl-icon\n        vclPrepend\n        icon=\"mdi:logout\"\n      ></vcl-icon>\n      {{ label$(config.accountMenu?.signOut || 'Sign out') | async }}\n    </vcl-select-list-item>\n    }\n  </vcl-select-list>\n</ng-template>\n}\n"]}